
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>An Oculus Rift Tap Menu - authenticgeek</title>
	<meta name="author" content="Nick O'Neill">

	
	<meta name="description" content="With the big Oculus/Facebook news this week I’m finally compelled to write on the blog about a fun thing I wrote for the VR headset last month. TL;DR &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="authenticgeek" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script type="text/javascript" src="//use.typekit.net/ktn7vyo.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">authenticgeek</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:blog.nickoneill.name">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/nickoneill" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/nickoneill" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:blog.nickoneill.name">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner"><article class="post">
	<h2 class="title">An Oculus Rift Tap Menu</h2>
	<div class="entry-content"><p>With the big Oculus/Facebook news this week I’m finally compelled to write on the blog about a fun thing I wrote for the VR headset last month. <em>TL;DR:</em> this video:</p>

<iframe width="800" height="450" src="//www.youtube.com/embed/HU7HOWj04Bw?rel=0" frameborder="0" allowfullscreen></iframe>


<p>A little background: I got an Oculus Rift late last year after hearing some really impressive reviews for how it changes gaming. After playing a few (there are only a few) games with the headset I was a little disappointed as most developers didn’t really understand the changes required by a new medium. While bad design on the web might have negative consequences on sales or brand recognition, giving your users headaches and nausea is a step beyond any negative feeling the web can typically induce.</p>

<p>In general, the gameplay was pretty good. Actions that used projectile motion were so much more intuitive in VR (lobbing a grenade, throwing a basketball, etc) that it made dealing with a weird screen door in front of your face bearable. <span>“poor UI bothers Nick, news at 11” yeah, I know</span> It was the UI parts in between action that really bothered me.</p>

<h3>the ui</h3>

<p>There’s a sweet spot for UI elements to appear in front of your face. Too far away and the text isn’t readable on the limited resolution screen of the developer kit hardware. Too close and your eyes have to quickly change their focal length back and forth, a process that can cause headaches. No one had done a really great job with these elements so far and, to be fair, it was because they wanted to focus on the fun part of games in a new medium.</p>

<p>My biggest issue with UI made for the headset was the strange interaction of head movements and mouse. Sometimes you clicked to select things but moved the cursor with your head, other times you were jarringly disconnected from your head movement and expected to use the mouse entirely to navigate menus.</p>

<p>The experience might have been slightly better for those people who played games paired with a controller, I don’t think there’s the intuitive sense that a controller will move your cursor like there is with a mouse.</p>

<p>Regardless, I thought I could improve on the user experience for games, even if only through the UI where users adjusted the volume or similar.</p>

<p>The headset has an accelerometer mounted on the front for head tracking (that is how it works, after all) and it can be used for input if filtered properly. So, instead of hovering over items and selecting them by waiting or using a button, you can simply tap the side of the headset and the accelerometer will pick up the ‘jolt’ and take some action.</p>

<h3>javascript and headsets</h3>

<p>I mocked up a quick menu system with Three.js and Oculus-bridge to show off the idea. The menu is just a randomly generated tree of menu items. Use your head to point to a menu item and tap the headset on the side to select. To traverse up the menu, point at the back button and tap.</p>

<p><a href="https://github.com/Instrument/oculus-bridge">Oculus-bridge</a> is an excellent project from Ben Purdy (<a href="http://blog.nickoneill.name/tiny-nes-cartridge/">not the first time I’ve mentioned Ben!</a>) for getting headset data into a javascript environment. It takes data from the ODK and forwards them to the local machine via websockets so any language speaking websockets can access it. Considering the small list of supported languages for the ODK, this is invaluable if you use something other than C++ or Unity and want to integrate the headset.</p>

<p>From there it was just a matter of getting data from the headset into Three.js and creating a scene that created and navigated menus. The former was pretty easy as boilerplate code from Oculus-bridge was available for lens distortion and head tracking. <span>despite overall questionable docs quality</span>I’ve never used Three.js previously but my idea was simple enough that I could implement most of the scene with a cursory reading of the docs.</p>

<p>My biggest issue turned out to be processing accelerometer data into actions reliably. <span>surprise! signal analysis is hard!</span>After a few simple moving average attempts that yielded poor results, I recorded some raw data and charted it so I could rerun different algorithms without having to put the headset on. Eventually first derivatives and moving averages solved most of my problems (I checked the <a href="http://">charting stuff</a> into github as well).</p>

<p>I did fail in one of my planned features though; I wanted navigating up the tree to be a left side tap while selecting was a right side tap. The part of the ODK that combines and feeds data from all the different sensors is capped at 60Hz and while this makes sense for most uses (it is highly suggested for VR that your game run at 60 FPS), it’s not quite enough resolution to see the directionality of taps.</p>

<p>This is one of the key points that my chart debugging turned me onto. In accelerometer data, a headset tap looks like a big spike in the direction of tap followed by a damped response in the opposite direction, repeating until your head is fully stabilized by your neck. Acceleration data is really quick, most of the sensors out there run at 1000+Hz, and for a trimmed stream of 60Hz data some of that data is just lost. In my case, the largest initial spike was frequently dropped entirely, leaving a detectable jolt but in the opposite direction. <span>youtube comments indicate people are worried about how jarring this is, but I barely notice it</span>It wasn’t a good experience to tap left and navigate opposite of the intended direction so I dropped it for a more simplistic approach.</p>

<p>That said, it’s totally possible to access the 1000Hz stream directly from the accelerometer on the headset and fix this problem. It didn’t seem like a worthwhile approach in this case though, the modifications I would have to make to Oculus-bridge are almost certainly outside the scope of what the app should do for 99% of users.</p>

<h3>future headsets</h3>

<p>I expect this to be available for developers targeting DK2 and the commercial version of the headset in the future. Even though the DK2 uses that fancy camera tracking system now for positioning, the accelerometer sensor is still available (and most likely used to improve tracking).</p>

<p>Since the UI expects you have a hand free to tap the headset, it’s probably not likely to make it into any application where you are also holding a controller or keyboard. If this method is going to been seen in the future on one of the many competing VR headsets, it will most likely be some very niche application that requires users have their hands free. <span>kinect integration maybe?</span></p>
</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-03-28T11:47:38-07:00" pubdate data-updated="true">Mar 28<span>th</span>, 2014</time></div>
	<div class="tags">


	<a class='category' href='/categories/oculus/'>oculus</a>, <a class='category' href='/categories/ui/'>ui</a>


</div>
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
		
		
		<a class="addthis_button_tweet"></a>
		
		
		<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
		
		
	</div>
	
</div>


</div>
	<footer id="footer" class="inner">Copyright &copy; 2014

    Nick O'Neill

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->





<script type="text/javascript">
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '5233714a108d7b17ea000176');
    t.src = '//secure.gaug.es/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
</script>
</body>
</html>